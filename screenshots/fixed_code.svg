<svg width="1200" height="900" xmlns="http://www.w3.org/2000/svg">
  <rect width="1200" height="900" fill="#1e1e1e"/>
  <rect width="1200" height="40" fill="#2d2d30"/>
  <text x="20" y="25" fill="#cccccc" font-family="Consolas, monospace" font-size="12">File Edit View Debug Run Terminal Help</text>
  
  <rect x="0" y="40" width="250" height="860" fill="#252526"/>
  <rect x="250" y="40" width="2" height="860" fill="#3e3e42"/>
  
  <rect x="252" y="40" width="948" height="30" fill="#2d2d30"/>
  <rect x="252" y="40" width="200" height="30" fill="#1e1e1e"/>
  <text x="260" y="60" fill="#cccccc" font-family="Consolas, monospace" font-size="11">SearchService.js</text>
  
  <rect x="252" y="70" width="948" height="830" fill="#1e1e1e"/>
  
  <!-- Номери рядків -->
  <text x="270" y="100" fill="#858585" font-family="Consolas, monospace" font-size="13">1</text>
  <text x="270" y="125" fill="#858585" font-family="Consolas, monospace" font-size="13">2</text>
  <text x="270" y="150" fill="#858585" font-family="Consolas, monospace" font-size="13">3</text>
  <text x="270" y="175" fill="#858585" font-family="Consolas, monospace" font-size="13">4</text>
  <text x="270" y="200" fill="#858585" font-family="Consolas, monospace" font-size="13">5</text>
  <text x="270" y="225" fill="#858585" font-family="Consolas, monospace" font-size="13">6</text>
  <text x="270" y="250" fill="#858585" font-family="Consolas, monospace" font-size="13">7</text>
  <text x="270" y="275" fill="#858585" font-family="Consolas, monospace" font-size="13">8</text>
  <text x="270" y="300" fill="#858585" font-family="Consolas, monospace" font-size="13">9</text>
  <text x="270" y="325" fill="#858585" font-family="Consolas, monospace" font-size="13">10</text>
  <text x="270" y="350" fill="#858585" font-family="Consolas, monospace" font-size="13">11</text>
  <text x="270" y="375" fill="#858585" font-family="Consolas, monospace" font-size="13">12</text>
  <text x="270" y="400" fill="#858585" font-family="Consolas, monospace" font-size="13">13</text>
  <text x="270" y="425" fill="#858585" font-family="Consolas, monospace" font-size="13">14</text>
  <text x="270" y="450" fill="#858585" font-family="Consolas, monospace" font-size="13">15</text>
  <text x="270" y="475" fill="#858585" font-family="Consolas, monospace" font-size="13">16</text>
  <text x="270" y="500" fill="#858585" font-family="Consolas, monospace" font-size="13">17</text>
  <text x="270" y="525" fill="#858585" font-family="Consolas, monospace" font-size="13">18</text>
  <text x="270" y="550" fill="#858585" font-family="Consolas, monospace" font-size="13">19</text>
  <text x="270" y="575" fill="#858585" font-family="Consolas, monospace" font-size="13">20</text>
  <text x="270" y="600" fill="#858585" font-family="Consolas, monospace" font-size="13">21</text>
  <text x="270" y="625" fill="#858585" font-family="Consolas, monospace" font-size="13">22</text>
  
  <!-- Виправлений код -->
  <text x="300" y="100" fill="#808080" font-family="Consolas, monospace" font-size="13">// Функція нормалізації з підтримкою Unicode</text>
  
  <text x="300" y="125" fill="#d4d4d4" font-family="Consolas, monospace" font-size="13">function</text>
  <text x="380" y="125" fill="#4ec9b0" font-family="Consolas, monospace" font-size="13">normalizeText</text>
  <text x="490" y="125" fill="#d4d4d4" font-family="Consolas, monospace" font-size="13">(text) {</text>
  
  <text x="320" y="150" fill="#808080" font-family="Consolas, monospace" font-size="13">  // Використання Unicode нормалізації (NFC) для коректної роботи з кирилицею</text>
  
  <text x="320" y="175" fill="#d4d4d4" font-family="Consolas, monospace" font-size="13">  return</text>
  <text x="390" y="175" fill="#d4d4d4" font-family="Consolas, monospace" font-size="13">text.</text>
  <text x="450" y="175" fill="#dcdcaa" font-family="Consolas, monospace" font-size="13">normalize</text>
  <text x="540" y="175" fill="#d4d4d4" font-family="Consolas, monospace" font-size="13">('NFC').</text>
  <text x="620" y="175" fill="#dcdcaa" font-family="Consolas, monospace" font-size="13">toLowerCase</text>
  <text x="740" y="175" fill="#d4d4d4" font-family="Consolas, monospace" font-size="13">().</text>
  <text x="760" y="175" fill="#dcdcaa" font-family="Consolas, monospace" font-size="13">trim</text>
  <text x="800" y="175" fill="#d4d4d4" font-family="Consolas, monospace" font-size="13">();</text>
  
  <text x="300" y="200" fill="#d4d4d4" font-family="Consolas, monospace" font-size="13">}</text>
  
  <text x="300" y="225" fill="#d4d4d4" font-family="Consolas, monospace" font-size="13">function</text>
  <text x="380" y="225" fill="#4ec9b0" font-family="Consolas, monospace" font-size="13">searchNotes</text>
  <text x="490" y="225" fill="#d4d4d4" font-family="Consolas, monospace" font-size="13">(query) {</text>
  
  <text x="320" y="250" fill="#d4d4d4" font-family="Consolas, monospace" font-size="13">  const</text>
  <text x="385" y="250" fill="#9cdcfe" font-family="Consolas, monospace" font-size="13">normalizedQuery</text>
  <text x="530" y="250" fill="#d4d4d4" font-family="Consolas, monospace" font-size="13">=</text>
  <text x="550" y="250" fill="#4ec9b0" font-family="Consolas, monospace" font-size="13">normalizeText</text>
  <text x="650" y="250" fill="#d4d4d4" font-family="Consolas, monospace" font-size="13">(query);</text>
  
  <text x="320" y="275" fill="#d4d4d4" font-family="Consolas, monospace" font-size="13">  const</text>
  <text x="385" y="275" fill="#9cdcfe" font-family="Consolas, monospace" font-size="13">results</text>
  <text x="450" y="275" fill="#d4d4d4" font-family="Consolas, monospace" font-size="13">= [];</text>
  
  <text x="320" y="300" fill="#d4d4d4" font-family="Consolas, monospace" font-size="13">  const</text>
  <text x="385" y="300" fill="#9cdcfe" font-family="Consolas, monospace" font-size="13">startTime</text>
  <text x="470" y="300" fill="#d4d4d4" font-family="Consolas, monospace" font-size="13">=</text>
  <text x="490" y="300" fill="#4ec9b0" font-family="Consolas, monospace" font-size="13">performance</text>
  <text x="580" y="300" fill="#d4d4d4" font-family="Consolas, monospace" font-size="13">.</text>
  <text x="590" y="300" fill="#dcdcaa" font-family="Consolas, monospace" font-size="13">now</text>
  <text x="640" y="300" fill="#d4d4d4" font-family="Consolas, monospace" font-size="13">();</text>
  
  <text x="320" y="325" fill="#d4d4d4" font-family="Consolas, monospace" font-size="13">  for</text>
  <text x="355" y="325" fill="#d4d4d4" font-family="Consolas, monospace" font-size="13">(const note</text>
  <text x="460" y="325" fill="#c586c0" font-family="Consolas, monospace" font-size="13">of</text>
  <text x="485" y="325" fill="#d4d4d4" font-family="Consolas, monospace" font-size="13">indexedNotes) {</text>
  
  <text x="340" y="350" fill="#808080" font-family="Consolas, monospace" font-size="13">    // Використання нормалізованого тексту для пошуку</text>
  
  <text x="340" y="375" fill="#d4d4d4" font-family="Consolas, monospace" font-size="13">    const</text>
  <text x="405" y="375" fill="#9cdcfe" font-family="Consolas, monospace" font-size="13">normalizedContent</text>
  <text x="540" y="375" fill="#d4d4d4" font-family="Consolas, monospace" font-size="13">=</text>
  <text x="560" y="375" fill="#4ec9b0" font-family="Consolas, monospace" font-size="13">normalizeText</text>
  <text x="660" y="375" fill="#d4d4d4" font-family="Consolas, monospace" font-size="13">(note.content);</text>
  
  <text x="340" y="400" fill="#d4d4d4" font-family="Consolas, monospace" font-size="13">    if</text>
  <text x="365" y="400" fill="#d4d4d4" font-family="Consolas, monospace" font-size="13">(normalizedContent.</text>
  <text x="520" y="400" fill="#dcdcaa" font-family="Consolas, monospace" font-size="13">includes</text>
  <text x="600" y="400" fill="#d4d4d4" font-family="Consolas, monospace" font-size="13">(normalizedQuery)) {</text>
  
  <text x="360" y="425" fill="#d4d4d4" font-family="Consolas, monospace" font-size="13">      results.</text>
  <text x="450" y="425" fill="#dcdcaa" font-family="Consolas, monospace" font-size="13">push</text>
  <text x="495" y="425" fill="#d4d4d4" font-family="Consolas, monospace" font-size="13">(note);</text>
  
  <text x="340" y="450" fill="#d4d4d4" font-family="Consolas, monospace" font-size="13">    }</text>
  
  <text x="320" y="475" fill="#d4d4d4" font-family="Consolas, monospace" font-size="13">  }</text>
  
  <text x="320" y="500" fill="#808080" font-family="Consolas, monospace" font-size="13">  // Перевірка швидкості виконання (вимога: не більше 1 сек)</text>
  
  <text x="320" y="525" fill="#d4d4d4" font-family="Consolas, monospace" font-size="13">  const</text>
  <text x="385" y="525" fill="#9cdcfe" font-family="Consolas, monospace" font-size="13">duration</text>
  <text x="460" y="525" fill="#d4d4d4" font-family="Consolas, monospace" font-size="13">=</text>
  <text x="480" y="525" fill="#4ec9b0" font-family="Consolas, monospace" font-size="13">performance</text>
  <text x="570" y="525" fill="#d4d4d4" font-family="Consolas, monospace" font-size="13">.</text>
  <text x="580" y="525" fill="#dcdcaa" font-family="Consolas, monospace" font-size="13">now</text>
  <text x="630" y="525" fill="#d4d4d4" font-family="Consolas, monospace" font-size="13">() - startTime;</text>
  
  <text x="320" y="550" fill="#d4d4d4" font-family="Consolas, monospace" font-size="13">  if</text>
  <text x="345" y="550" fill="#d4d4d4" font-family="Consolas, monospace" font-size="13">(duration &gt; 1000) {</text>
  
  <text x="340" y="575" fill="#d4d4d4" font-family="Consolas, monospace" font-size="13">    console.</text>
  <text x="420" y="575" fill="#dcdcaa" font-family="Consolas, monospace" font-size="13">warn</text>
  <text x="480" y="575" fill="#d4d4d4" font-family="Consolas, monospace" font-size="13">('Пошук виконано за ' + duration + 'мс (перевищено ліміт)');</text>
  
  <text x="320" y="600" fill="#d4d4d4" font-family="Consolas, monospace" font-size="13">  }</text>
  
  <text x="320" y="625" fill="#d4d4d4" font-family="Consolas, monospace" font-size="13">  return</text>
  <text x="390" y="625" fill="#9cdcfe" font-family="Consolas, monospace" font-size="13">results</text>
  <text x="460" y="625" fill="#d4d4d4" font-family="Consolas, monospace" font-size="13">;</text>
  
  <text x="300" y="650" fill="#d4d4d4" font-family="Consolas, monospace" font-size="13">}</text>
  
  <!-- Підсвітка виправлення -->
  <rect x="320" y="115" width="500" height="65" fill="#1e3a1e" opacity="0.3"/>
  <rect x="320" y="240" width="330" height="20" fill="#1e3a1e" opacity="0.3"/>
  <rect x="340" y="365" width="340" height="20" fill="#1e3a1e" opacity="0.3"/>
  
  <!-- Коментар про виправлення -->
  <rect x="252" y="700" width="948" height="200" fill="#252526"/>
  <text x="270" y="730" fill="#4ec9b0" font-family="Consolas, monospace" font-size="12" font-weight="bold">✓ FIX APPLIED</text>
  <text x="270" y="760" fill="#cccccc" font-family="Consolas, monospace" font-size="11">1. Added normalizeText() function with Unicode normalization (NFC)</text>
  <text x="270" y="780" fill="#cccccc" font-family="Consolas, monospace" font-size="11">2. Updated searchNotes() to use normalizeText() for both query and content</text>
  <text x="270" y="800" fill="#cccccc" font-family="Consolas, monospace" font-size="11">3. Added performance monitoring to ensure search completes within 1 second</text>
  <text x="270" y="820" fill="#238636" font-family="Consolas, monospace" font-size="11">Result: Search now works correctly for both Latin and Cyrillic text</text>
</svg>
